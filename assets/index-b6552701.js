(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function c(i){if(i.ep)return;i.ep=!0;const h=a(i);fetch(i.href,h)}})();let v=window.innerWidth>640?640:window.innerWidth,n=v/2,f=0,u=0,r={};const e=document.getElementById("canvas"),s=e.getContext("2d");e.width=v-5;e.height=n-10;e.style.border="4px solid green";e.style.borderRadius="8px";s.fillStyle="rgba(10, 120, 100, 0.7)";e.style.backgroundColor="black";let y=Math.floor(Math.random()*(1- -1+1)-1)||-1;class w{constructor(t,a=(e.width-10)/2,c=(e.height-10)/2,i=n/25,h=y){this.size=i,this.x=a,this.y=c,this.context=t,this.direction=h,this.velocityX=5*this.direction,this.velocityY=Math.random()*(.5+-.5)+.5,this.count=1,this.max=i*1,this.color="green"}setDirection(t){this.direction=t}draw(){this.context.fillStyle=this.color,this.context.fillRect(this.x,this.y,this.size,this.size),s.fillStyle="rgba(255, 255, 255, 0.5)",s.fillRect(this.x-4,this.y-2,this.size+2,this.size+2)}update(t){if(this.y-this.size/2<0&&(this.velocityY=Math.abs(this.velocityY),this.velocityX=this.velocityX-1e-4),this.y+this.size+4>=e.height&&(this.velocityY=-this.velocityY),t===-1){this.velocityX=this.velocityX*t,this.velocityY+=Math.random()*(2.5+-2.5+-2.5),this.x+=4+Math.abs(this.velocityX)*3,this.y+=this.velocityY;return}if(t===1){this.velocityX=-Math.abs(this.velocityX),this.x+=-4+this.velocityX*3,this.velocityY+=Math.random()*(2.5+-2.5+-2.5),this.y+=this.velocityY;return}t||(this.x+=this.velocityX,this.y+=this.velocityY)}}class g{constructor(t,a,c,i,h){this.x=t,this.y=a,this.height=c,this.width=i,this.context=h,this.score=0}draw(){this.context.strokeStyle="rgba(255, 0, 0, 0.5)",s.fillStyle="white",this.context.fillRect(this.x,this.y,this.width,this.height),s.fillStyle="rgba(140, 100, 200, 0.3)",this.context.fillRect(this.x+4,this.y,this.width-4,this.height),this.context.stroke(),s.fillStyle="lightgreen"}moveUp(){this.y-20<0||(this.y-=25)}moveDown(){this.y+this.height+20>e.height||(this.y+=25)}onScore(){this.score++}}class m{constructor(t){this.particles=[],this.player1=new g(10,e.height/2-n/4/2,n/4,8,t),this.player2=new g(e.width-20,e.height/2-n/4/2,n/4,8,t),this.context=t,this.pads=[],this.gameOver=!1}collectParticles(t){this.particles.push(new w(this.context,(e.width-10)/2,(e.height-10)/2,n/25,t))}moveStart(t){if(r[t.keyCode]=!0,r[40]&&r[83]){this.player1.moveDown(),this.player2.moveDown();return}if(r[87]&&r[38]){this.player1.moveUp(),this.player2.moveUp();return}if(r[87])return this.player1.moveUp();if(r[83])return this.player1.moveDown();if(r[38])return this.player2.moveUp();if(r[40])return this.player2.moveDown()}moveFinish(t){r={}}draw(){this.particles.concat().forEach(t=>{t.draw()}),[this.player1,this.player2].forEach(t=>{t.draw()})}update(){s.font=`${e.height/12}px serif`,s.texAlign="center",s.fillStyle="grey",s.fillText(`Player 1: ${f}`,40,e.height/10),s.fillText(`Player 2: ${u}`,e.width-130,e.height/10);for(let t=36;t<e.width-34;t+=40)s.fillStyle="rgba(255, 255, 255, 0.1)",s.fillRect(t,0,1,e.height),s.fillRect(0,t,e.width,1);this.particles.forEach(t=>{if(this.player1.x>=t.x-t.size/2&&t.y-t.size/2<=this.player1.y+this.player1.height&&t.y+t.size/2>=this.player1.y){t.update(-1);return}else{if(this.player2.x<=t.x+t.size&&t.y-t.size/2<=this.player2.y+this.player2.height&&t.y+t.size/2>=this.player2.y){t.update(1);return}if(t.x<0||t.x+t.size>=e.width){t.x<0?(u++,y=-1):(f++,y=1),this.gameOver=!0;return}}t.update(0)})}}let o=new m(s);o.collectParticles();document.addEventListener("keydown",l=>o.moveStart(l));document.addEventListener("keyup",l=>o.moveFinish(l));function p(){s.clearRect(0,0,e.width,e.height),o.draw(),o.update(),o.gameOver&&(s.clearRect(0,0,e.width,e.height),o=new m(s),o.gameOver=!1,o.collectParticles(y),o.draw()),requestAnimationFrame(p)}p();
